<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="maze token, zombie token, bitcoin cash, bch, smartbCH">
    <meta name="web" content="https://mazetoken.github.io/zombie">
    <title>ZOMBIE SmartBCH token faucet</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/web3@1.6.1/dist/web3.min.js" integrity="sha256-XH+mnS1YTklQJ7VzeLSviplcaKwkRWpwDwHUNXVCuIU=" crossorigin="anonymous"></script>
	<!-- <script>
		function onSubmit(contract) {
		document.getElementById("data-form").submit();
		}
	</script> -->
  </head>

  <body class="container">
    <h1 class="page-header">ZOMBIE SmartBCH token faucet</h1>
    <p></p><br>
	<p><img src="img/zombie200.png" alt="ZOMBIE icon" width="200" height="200"></p><br>
    <div class="row">
      	<div>
        <h3 class="sub-header">Claim 500 ZOMBIE one time per day</h3>
			<form action="/claimZombie" method="post" id="data-form">
  	  			<label for="address">Paste your wallet address:</label><br>
  	  			<input type="text" id="address" name="address" size="80"><br><br>
  	  			<button id="button" class="btn-sm btn-secondary"
          			data-callback="onSubmit"
          			data-action="submit">Claim</button>
			</form>
      	</div>
    </div>
    <p></p><br>
	<p><a href="https://zombies.onuniverse.com">Zombiesite</a></p>
	<p><a href="https://mazetoken.github.io/zombie">Zombie Github pages</a></p>
	<p><a href="https://github.com/mazetoken/zombie/blob/main/contracts/ZombieFaucet.sol">ZombieFaucet code</a></p>

    <script>
        window.addEventListener('load', async () => {
            if (window.ethereum) {
                window.web3 = new Web3(ethereum);
                try {
                    // ask user for permission
                    await ethereum.enable();
                    // user approved permission
                } catch (error) {
                    // user rejected permission
                    alert('user rejected permission');
                }
            }
        });

		const contractabi = [
		{
			"inputs": [
				{
					"internalType": "address",
					"name": "recipient",
					"type": "address"
				}
			],
			"name": "claimZombie",
			"outputs": [],
			"stateMutability": "nonpayable",
			"type": "function"
		},
		{
			"inputs": [],
			"stateMutability": "nonpayable",
			"type": "constructor"
		},
		{
			"inputs": [],
			"name": "amount",
			"outputs": [
				{
					"internalType": "uint256",
					"name": "",
					"type": "uint256"
				}
			],
			"stateMutability": "view",
			"type": "function"
		},
		{
			"inputs": [
				{
					"internalType": "address",
					"name": "",
					"type": "address"
				}
			],
			"name": "lockTime",
			"outputs": [
				{
					"internalType": "uint256",
					"name": "",
					"type": "uint256"
				}
			],
			"stateMutability": "view",
			"type": "function"
		},
		{
			"inputs": [],
			"name": "name",
			"outputs": [
				{
					"internalType": "string",
					"name": "",
					"type": "string"
				}
			],
			"stateMutability": "view",
			"type": "function"
		},
		{
			"inputs": [],
			"name": "zombie",
			"outputs": [
				{
					"internalType": "address",
					"name": "",
					"type": "address"
				}
			],
			"stateMutability": "view",
			"type": "function"
		}
		];
		const contractaddress = '0x80453ACDfE0073D6743B27D72e06F48777EeAd80';
		const contract = new web3.eth.Contract(contractabi, contractaddress);
        contract.methods.claimZombie(address).send();

		document.getElementById("data-form").submit();
		onSubmit(); 
	</script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  </body>
</html>